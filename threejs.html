<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <script type="importmap">
      {
        "imports": {
          "three": "https://unpkg.com/three@0.139.2/build/three.module.js"
        }
      }
    </script>
    <link rel="stylesheet" href="style.css" >
  </head>
  <body>
    <canvas id="myCanvas" height="300px" width="500px">    </canvas>

    <script type="module">
        const myCanvas = document.querySelector('#myCanvas');

        import * as THREE from 'three';
        import { OrbitControls } from 'https://unpkg.com/three@0.139.2/examples/jsm/controls/OrbitControls.js';
        import { GLTFLoader } from 'https://unpkg.com/three@0.139.2/examples/jsm/loaders/GLTFLoader.js'
        import { STLLoader } from 'https://unpkg.com/three@0.139.2/examples/jsm/loaders/STLLoader.js'
        import { VRMLLoader } from 'https://unpkg.com/three@0.139.2/examples/jsm/loaders/VRMLLoader.js'


        const metal = new URL('/metal.glb', import.meta.url);
        const MZFB659A_2 = new URL('/MZFB659A_2.STL', import.meta.url);
        const scene = new THREE.Scene();
        let vrmlScene;

        const camera = new THREE.PerspectiveCamera(
            120,
            myCanvas.offsetWidth / myCanvas.offsetHeight
        );

        camera.position.set(1, 3, 3);
        camera.lookAt(scene.position);

        const light = new THREE.SpotLight()
        light.position.set(20, 20, 20)
        scene.add(light)

        const renderer = new THREE.WebGLRenderer({ canvas: myCanvas });
        renderer.setClearColor(0xffffff, 1.0);
        renderer.setPixelRatio(window.devicePixelRatio);
        renderer.setSize(myCanvas.offsetWidth, myCanvas.offsetHeight);

        const orbitControls = new OrbitControls(camera, renderer.domElement);

        // const assetLoader = new GLTFLoader();
        // assetLoader.load(metal.href, function(gltf){
        //     const model = gltf.scene;
        //     scene.add(model);
        //     model.position.set(0, 0, 0)
        // }, undefined, function(error){
        //     concole.error(error);
        // });

        // const loader = new STLLoader()
        // loader.load("/test.stl", function (geometry) {
        //     const group = new THREE.Group()
        //     scene.add(group)

        //     const material = new THREE.MeshPhongMaterial({ color: 0xaaaaaa, specular: 0x111111, shininess: 200 })
        //     const mesh = new THREE.Mesh(geometry, material)
        //     mesh.position.set(0, 0, 0)
        //     mesh.scale.set(10, 10, 10)
        //     mesh.castShadow = true
        //     mesh.receiveShadow = true

        //     geometry.center()
        //     group.add(mesh)
        // })

        var loader = new VRMLLoader();
        loader.load( 'files/test.wrl', function ( object ) {
          vrmlScene = object;
          scene.add( object );
          orbitControls.reset();
        }, undefined, function(error){
          console.error(error);
        } );


        renderer.setAnimationLoop(() => {
            orbitControls.update();

            renderer.render(scene, camera);
        });
    </script>
  </body>
</html>